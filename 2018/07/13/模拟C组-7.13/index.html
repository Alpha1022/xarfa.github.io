<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="ARFA">
  <!-- Open Graph Data -->
  <meta property="og:title" content="模拟C组 7.13"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="ARFA"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.com"/>
  
    <link rel="alternate" href="/atom.xml" title="ARFA" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>ARFA</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.dark.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">模拟C组 7.13</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/xarfa">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="https://www.luogu.org/space/show?uid=77760">
                  
                  Luogu
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By ARFA</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2018-07-13</span>
            <span class="time">19:54:43</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/JZOI/">JZOI</a>
</span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="7-13-排名-垫底"><a href="#7-13-排名-垫底" class="headerlink" title="7.13 排名:垫底"></a>7.13 排名:垫底</h1><a id="more"></a>
<h2 id="T1-七夕祭"><a href="#T1-七夕祭" class="headerlink" title="T1 七夕祭"></a>T1 七夕祭</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p><code>七夕节因牛郎织女的传说而被扣上了「情人节」的帽子。于是TYVJ今年举办了一次线下七夕祭。Vani同学今年成功邀请到了cl同学陪他来共度七夕，于是他们决定去TYVJ七夕祭游玩。TYVJ七夕祭和11区的夏祭的形式很像。矩形的祭典会场由N排M列共计N×M个摊点组成。虽然摊点种类繁多，不过cl只对其中的一部分摊点感兴趣，比如章鱼烧、苹果糖、棉花糖、射的屋……什么的。Vani预先联系了七夕祭的负责人zhq，希望能够通过恰当地布置会场，使得各行中cl感兴趣的摊点数一样多，并且各列中cl感兴趣的摊点数也一样多。
不过zhq告诉Vani，摊点已经随意布置完毕了，如果想满足cl的要求，唯一的调整方式就是交换两个相邻的摊点。两个摊点相邻，当且仅当他们处在同一行或者同一列的相邻位置上。由于zhq率领的TYVJ开发小组成功地扭曲了空间，每一行或每一列的第一个位置和最后一个位置也算作相邻。现在Vani想知道他的两个要求最多能满足多少个。在此前提下，至少需要交换多少次摊点。</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">第一行包含三个整数N和M和T。T表示cl对多少个摊点感兴趣。</span><br><span class="line"></span><br><span class="line">接下来T行，每行两个整数x, y，表示cl对处在第x行第y列的摊点感兴趣。</span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">首先输出一个字符串。如果能满足Vani的全部两个要求，输出both；如果通过调整只能使得各行中cl感兴趣的摊点数一样多，输出row；如果只能使各列中cl感兴趣的摊点数一样多，输出column；如果均不能满足，输出impossible。</span><br><span class="line"></span><br><span class="line">如果输出的字符串不是impossible， 接下来输出最小交换次数，与字符串之间用一个空格隔开。</span><br><span class="line"></span><br><span class="line">Sample Input</span><br><span class="line">样例输入1</span><br><span class="line"></span><br><span class="line">2 3 4</span><br><span class="line"></span><br><span class="line">1 3</span><br><span class="line"></span><br><span class="line">2 1</span><br><span class="line"></span><br><span class="line">2 2</span><br><span class="line"></span><br><span class="line">2 3</span><br><span class="line"></span><br><span class="line">样例输入2</span><br><span class="line"></span><br><span class="line">3 3 3</span><br><span class="line"></span><br><span class="line">1 3</span><br><span class="line"></span><br><span class="line">2 2</span><br><span class="line"></span><br><span class="line">2 3</span><br><span class="line"></span><br><span class="line">Sample Output</span><br><span class="line">样例输出1</span><br><span class="line"></span><br><span class="line">row 1</span><br><span class="line"></span><br><span class="line">样例输出2</span><br><span class="line"></span><br><span class="line">both 2</span><br><span class="line"></span><br><span class="line">Data Constraint</span><br><span class="line">对于30% 的数据，N, M≤100。</span><br><span class="line"></span><br><span class="line">对于70% 的数据，N, M≤1000。</span><br><span class="line"></span><br><span class="line">对于100% 的数据，1≤N, M≤100000，0≤T≤min(NM, 100000)，1≤x≤N，1≤y≤M。</span><br></pre></td></tr></table></figure></p>
<p>大佬题解:稍加思索可以发现，行列之间是互不影响的，把每行 1 的个数看做 n 堆纸牌、每列 1 的个数<br>看做 m 堆纸牌，题目实际上就是两个环形的均分纸牌问题。<br>(什么？你不知道均分纸牌问题！你还是看看 NOIP2002 T1，做做历届 NOIP 前两题再来<br>吧……)</p>
<p>下面来说环形均分纸牌问题怎么做：<br>设有 n 堆纸牌，每堆有 ai 张，所有堆一共有 s 张，那么最终每堆应该有 s / n 张。因此如果 s<br>mod ai≠0，显然是无解的。接下来构造数列 bi=ai-s/n。</p>
<p>方法一：<br>枚举从第 k 个位置开始(1&lt;=k&lt;=n)，像均分纸牌的方法一样依次向后推（如果第 i 个位置有<br>ai 堆牌，那么取 bi 堆牌分给下一堆，若 bi&lt;0 表示从下一堆拿到这一堆）。最后取最小值。<br>时间复杂度 O(n^2)，预计得分 70 分。<br>方法二：</p>
<p>设 bi 的前缀和为 si。如果从第 k 个位置开始，那么第 i 堆和第 i+1 堆交换的纸牌数就是 |si-sk|。<br>总代价就是|s1-sk|+|s2-sk|+|s3-sk|+……+|sn-sk|。发现什么了？当 sk 是 s1~sn 中位数的时候，<br>上式有最小值！所以把 si 排序后，令 sk=s[(n+1)/2]，计算代价即可。<br>时间复杂度 O(nlogn)，预计得分 100 分。</p>
<figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">        a,b,h,l,c:<span class="keyword">array</span>[-<span class="number">1</span>..<span class="number">1000100</span>] <span class="keyword">of</span> longint;</span><br><span class="line">        i,j,n,m,k,t,mid:longint;</span><br><span class="line">        ans:int64;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">Sort</span><span class="params">(l,r:longint)</span>;</span></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line">        i,j,s,t:longint;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        i:=l; j:=r; s:=c[(l+r) <span class="keyword">div</span> <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">repeat</span></span><br><span class="line">                <span class="keyword">while</span> c[i]&lt;s <span class="keyword">do</span> i:=i+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> c[j]&gt;s <span class="keyword">do</span> j:=j-<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> i&lt;=j <span class="keyword">then</span></span><br><span class="line">                <span class="keyword">begin</span></span><br><span class="line">                        t:=c[i]; c[i]:=c[j]; c[j]:=t;</span><br><span class="line">                        inc(i); dec(j);</span><br><span class="line">                <span class="keyword">end</span>;</span><br><span class="line">        <span class="keyword">until</span> i&gt;=j;</span><br><span class="line">        <span class="keyword">if</span> i&lt;r <span class="keyword">then</span> Sort(i,r);</span><br><span class="line">        <span class="keyword">if</span> j&gt;l <span class="keyword">then</span> Sort(l,j);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        ans:=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">read</span>(n,m,t);</span><br><span class="line">        k:=t <span class="keyword">div</span> n;</span><br><span class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> t <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">read</span>(a[i],b[i]);</span><br><span class="line">                inc(h[a[i]]);</span><br><span class="line">                inc(l[b[i]]);</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> t <span class="keyword">mod</span> n=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> t <span class="keyword">do</span></span><br><span class="line">                        c[i]:=c[i-<span class="number">1</span>]+h[i]-t <span class="keyword">div</span> n;</span><br><span class="line">                Sort(<span class="number">1</span>,n);</span><br><span class="line">                mid:=c[(n+<span class="number">1</span>) <span class="keyword">div</span> <span class="number">2</span>];</span><br><span class="line">                <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">                        inc(ans,abs(c[i]-mid));</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">        <span class="keyword">if</span> t <span class="keyword">mod</span> m=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">                fillchar(c,sizeof(c),<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> t <span class="keyword">do</span></span><br><span class="line">                        c[i]:=c[i-<span class="number">1</span>]+l[i]-t <span class="keyword">div</span> m;</span><br><span class="line">                Sort(<span class="number">1</span>,m);</span><br><span class="line">                mid:=c[(m+<span class="number">1</span>) <span class="keyword">div</span> <span class="number">2</span>];</span><br><span class="line">                <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span></span><br><span class="line">                        inc(ans,abs(c[i]-mid));</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (t <span class="keyword">mod</span> n&lt;&gt;<span class="number">0</span>)<span class="keyword">and</span>(t <span class="keyword">mod</span> m&lt;&gt;<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">                writeln(<span class="string">'impossible'</span>)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> (t <span class="keyword">mod</span> n&lt;&gt;<span class="number">0</span>)<span class="keyword">and</span>(t <span class="keyword">mod</span> m=<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">                writeln(<span class="string">'column '</span>,ans)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> (t <span class="keyword">mod</span> n=<span class="number">0</span>)<span class="keyword">and</span>(t <span class="keyword">mod</span> m&lt;&gt;<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">                writeln(<span class="string">'row '</span>,ans)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                writeln(<span class="string">'both '</span>,ans);</span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>
<h2 id="T2-太鼓达人"><a href="#T2-太鼓达人" class="headerlink" title="T2 太鼓达人"></a>T2 太鼓达人</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p><code>七夕祭上，Vani牵着cl的手，在明亮的灯光和欢乐的气氛中愉快地穿行。这时，在前面忽然出现了一台太鼓达人机台，而在机台前坐着的是刚刚被精英队伍成员XLk、Poet_shy和lydrainbowcat拯救出来的的applepi。看到两人对太鼓达人产生了兴趣，applepi果断闪人，于是cl拿起鼓棒准备挑战。然而即使是在普通难度下，cl的路人本性也充分地暴露了出来。一曲终了，不但没有过关，就连鼓都不灵了。Vani十分过意不去，决定帮助工作人员修鼓。
鼓的主要元件是M个围成一圈的传感器。每个传感器都有开和关两种工作状态，分别用1和0表示。显然，从不同的位置出发沿顺时针方向连续检查K个传感器可以得到M个长度为K的01串。Vani知道这M个01串应该是互不相同的。而且鼓的设计很精密，M会取到可能的最大值。现在Vani已经了解到了K的值，他希望你求出M的值，并给出字典序最小的传感器排布方案。</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">一个整数K。</span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">一个整数M和一个二进制串，由一个空格分隔。表示可能的最大的M，以及字典序最小的排布方案，字符0表示关，1表示开。</span><br><span class="line">你输出的串的第一个字和最后一个字是相邻的。</span><br><span class="line"></span><br><span class="line">Sample Input</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">Sample Output</span><br><span class="line">8 00010111</span><br><span class="line"></span><br><span class="line">样例解释：</span><br><span class="line"></span><br><span class="line">得到的8个01串分别是000、001、010、101、011、111、110和100。注意前后是相邻的。</span><br><span class="line">长度为3的二进制串总共只有8种，所以M = 8一定是可能的最大值。</span><br><span class="line"></span><br><span class="line">Data Constraint</span><br><span class="line">对于全部测试点，2≤K≤11。</span><br></pre></td></tr></table></figure></p>
<p>这道题就是爆搜,也可以用欧拉回路跑一遍。讲一讲爆搜的主要思路。</p>
<p>如果两个字典序的全排列(类似)的后两位和前两位是一样的,我们就选入。表示为:if num[i,后两位]=num[i+1…n,前两位] then:选入。</p>
<p>细节见Code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">//Title:太鼓达人</span><br><span class="line"></span><br><span class="line">var</span><br><span class="line">        n,i,j,tail,len,k,o:longint;</span><br><span class="line">        num:array[0..110000] of string;</span><br><span class="line">        used:array[0..110000] of boolean;</span><br><span class="line">        ans:string;</span><br><span class="line"></span><br><span class="line">procedure Dfs(x:longint;s:string);</span><br><span class="line">var</span><br><span class="line">        i:longint;</span><br><span class="line">begin</span><br><span class="line">        if x=n+1 then</span><br><span class="line">        begin</span><br><span class="line">                inc(tail);</span><br><span class="line">                num[tail]:=s;</span><br><span class="line">                exit;</span><br><span class="line">        end</span><br><span class="line">        else</span><br><span class="line">        begin</span><br><span class="line">                Dfs(x+1,s+&apos;0&apos;);</span><br><span class="line">                Dfs(x+1,s+&apos;1&apos;);</span><br><span class="line">        end;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">procedure Dfs2(x:longint;ans:ansistring);</span><br><span class="line">var</span><br><span class="line">        j:longint;</span><br><span class="line">begin</span><br><span class="line">        if x=len then</span><br><span class="line">        begin</span><br><span class="line">                for i:=1 to length(ans)-n+1 do</span><br><span class="line">                        write(ans[i]);</span><br><span class="line">                halt;</span><br><span class="line">        end;</span><br><span class="line">        for j:=2 to len do</span><br><span class="line">                begin</span><br><span class="line">                        if used[j]=False then</span><br><span class="line">                        begin</span><br><span class="line">                                o:=0;</span><br><span class="line">                                used[0]:=True;</span><br><span class="line">                                for k:=length(ans)-n+2 to length(ans) do</span><br><span class="line">                                begin</span><br><span class="line">                                        inc(o);</span><br><span class="line">                                        if ans[k]&lt;&gt;num[j,o] then</span><br><span class="line">                                        begin</span><br><span class="line">                                                used[0]:=False;</span><br><span class="line">                                                break;</span><br><span class="line">                                        end;</span><br><span class="line">                                end;</span><br><span class="line">                                if used[0] then</span><br><span class="line">                                begin</span><br><span class="line">                                        used[j]:=True;</span><br><span class="line">                                        Dfs2(x+1,ans+num[j,n]);</span><br><span class="line">                                        used[j]:=False;</span><br><span class="line">                                end;</span><br><span class="line">                        end;</span><br><span class="line">                end;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">begin</span><br><span class="line">        read(n);</span><br><span class="line">        len:=1 &lt;&lt; n;</span><br><span class="line">        write(len,&apos; &apos;);</span><br><span class="line">        Dfs(1,&apos;&apos;);</span><br><span class="line"></span><br><span class="line">        for i:=1 to n do</span><br><span class="line">                ans:=ans+&apos;0&apos;;</span><br><span class="line">        Dfs2(1,ans);</span><br><span class="line">end.</span><br></pre></td></tr></table></figure></p>
<h2 id="T3-理科男"><a href="#T3-理科男" class="headerlink" title="T3 理科男"></a>T3 理科男</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p><code>“那么，我有一个问题想要问你呢。”cl的脸有点红了起来。“嗯……好吧。问、问吧……我会告诉你的哦……”“那好。对于一个分数A / B……”“嗯……哎？哎？！”“……就是这个问题。我觉得这个问题好纠结啊……”Vani淡定地说完这句话。“啊？！哈啊？！”对于给定的分数 A / B，求其在 K 进制下是有限小数还是循环小数。如果是有限小数，求小数点后的位数；如果是循环小数，则求混循环部分和循环节的长度又分别是多少。
注意，循环节指的是最短循环节，且混循环部分的长度也指最短。</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">第一行一个正整数 T，表示测试数据的数目。</span><br><span class="line"></span><br><span class="line">每个测试数据包含三个空格分隔的整数 A, B, K。含义如题目所示。</span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">对于每个测试数据，在单独的一行内输出两个空格分隔的整数 M, R。</span><br><span class="line"></span><br><span class="line">其中 M 表示混循环部分的长度，R 表示循环节的长度。</span><br><span class="line"></span><br><span class="line">如果 A / B 在 K 进制下是有限小数，则 R = 0，M 为小数点后面的位数；如果 A / B 在 K 进制下是纯循环小数，则 M = 0。</span><br><span class="line"></span><br><span class="line">Sample Input</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">1 8 10</span><br><span class="line"></span><br><span class="line">17 99 10</span><br><span class="line"></span><br><span class="line">217 990 10</span><br><span class="line"></span><br><span class="line">Sample Output</span><br><span class="line">3 0</span><br><span class="line"></span><br><span class="line">0 2</span><br><span class="line"></span><br><span class="line">1 2</span><br><span class="line"></span><br><span class="line">Data Constraint</span><br><span class="line">对于 50% 的数据，B≤100000。</span><br><span class="line"></span><br><span class="line">对于 100% 的数据，1≤A&lt;B≤10^12，K≤10^12，T≤10。</span><br></pre></td></tr></table></figure></p>
<p>准备学习基础数论。</p>
<h2 id="T4-黑魔法师之门"><a href="#T4-黑魔法师之门" class="headerlink" title="T4 黑魔法师之门"></a>T4 黑魔法师之门</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><p><code>applepi被囚禁的地点只有一扇门，当地人称它为“黑魔法师之门”。这扇门上画着一张无向无权图，而打开这扇门的密码就是图中每个点的度数大于零且都是偶数的子图的个数对1000000009取模的值。此处子图 (V, E) 定义为：点集V和边集E都是原图的任意子集，其中E中的边的端点都在V中。
但是Vani认为这样的密码过于简单，因此门上的图是动态的。起初图中只有N个顶点而没有边。Vani建造的门控系统共操作M次，每次往图中添加一条边。你必须在每次操作后都填写正确的密码，才能够打开黑魔法师的牢狱，去拯救伟大的领袖applepi。</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">第一行包含两个整数N和M。</span><br><span class="line"></span><br><span class="line">接下来M行，每行两个整数A和B，代表门控系统添加了一条无向边 (A, B)。</span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">输出一共M行，表示每次操作后的密码。</span><br><span class="line"></span><br><span class="line">Sample Input</span><br><span class="line">4 8</span><br><span class="line"></span><br><span class="line">3 1</span><br><span class="line"></span><br><span class="line">3 2</span><br><span class="line"></span><br><span class="line">2 1</span><br><span class="line"></span><br><span class="line">2 1</span><br><span class="line"></span><br><span class="line">1 3</span><br><span class="line"></span><br><span class="line">1 4</span><br><span class="line"></span><br><span class="line">2 4</span><br><span class="line"></span><br><span class="line">2 3</span><br><span class="line"></span><br><span class="line">Sample Output</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">7</span><br><span class="line"></span><br><span class="line">7</span><br><span class="line"></span><br><span class="line">15</span><br><span class="line"></span><br><span class="line">31</span><br><span class="line"></span><br><span class="line">样例解释：</span><br><span class="line"></span><br><span class="line">第三次添加之后，存在一个满足条件的子图 &#123;1, 2, 3&#125;（其中1, 2, 3是数据中边的标号）。</span><br><span class="line"></span><br><span class="line">第四次添加之后，存在三个子图 &#123;1, 2, 3&#125;，&#123;1, 2, 4&#125;，&#123;3, 4&#125;。</span><br><span class="line"></span><br><span class="line">子图不一定连通。举另外一个例子，例如点(1、2、3)，(4、5、6)分别组成一个三元环，则图中有三个所求子图。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Data Constraint</span><br><span class="line">对于30% 的数据，N, M≤10。</span><br><span class="line"></span><br><span class="line">对于100% 的数据，N≤200000，M≤300000。</span><br></pre></td></tr></table></figure></p>
<p>一开始看到度数真的以为跟欧拉有什么关系,不过仔细一看不过就是一个判断环的问题。如果狂弄DFS我就无f**k说了。</p>
<p>再看一下数据,很大。如何找出答案的规律?</p>
<p><img src="https://cdn.luogu.org/upload/pic/23304.png" alt=""></p>
<p>我们会发现上面的图每一次连,ans:=ans*2+1,也就是inc(ans,ans+1);</p>
<p>然后并查集维护一下:<br><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Title:黑魔法师之门</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line">        fa:<span class="keyword">array</span>[<span class="number">1</span>..<span class="number">510000</span>] <span class="keyword">of</span> int64;</span><br><span class="line">        n,m,l,r,fa1,fa2:int64;</span><br><span class="line">        i:longint;</span><br><span class="line">        ans:int64;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">(x:longint)</span>:</span>longint;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> fa[x]=x <span class="keyword">then</span></span><br><span class="line">                <span class="keyword">exit</span>(x)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">                get:=get(fa[x]);</span><br><span class="line">                fa[x]:=get;</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">read</span>(n,m);</span><br><span class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> n <span class="keyword">do</span></span><br><span class="line">                fa[i]:=i;</span><br><span class="line">        ans:=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> m <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">read</span>(l,r);</span><br><span class="line">                fa1:=get(l);</span><br><span class="line">                fa2:=get(r);</span><br><span class="line">                <span class="keyword">if</span> fa1=fa2 <span class="keyword">then</span></span><br><span class="line">				<span class="keyword">begin</span></span><br><span class="line">                        inc(ans,ans+<span class="number">1</span>);</span><br><span class="line">						ans:=ans <span class="keyword">mod</span> <span class="number">1000000009</span>;</span><br><span class="line">				<span class="keyword">end</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                        fa[fa1]:=fa2;</span><br><span class="line"></span><br><span class="line">                writeln(ans <span class="keyword">mod</span> <span class="number">1000000009</span>);</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure></p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

